(()=>{function e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var n=function(){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.$body=$("body")}var a,t,i;return a=n,i=[{key:"setupSecurity",value:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})}}],(t=[{key:"init",value:function(){this.changeFilter()}},{key:"changeFilter",value:function(){var e=this;e.$body.off("click",".js-rv-media-change-filter").on("click",".js-rv-media-change-filter",(function(n){if(n.preventDefault(),!e.isOnAjaxLoading()){var a=$(n.currentTarget),t=a.closest("ul"),i=a.data();a.closest(".dropdown").find(".js-rv-media-filter-current").html("("+a.html()+")"),$.ajax({url:"workflows/apply_workflow",type:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:i,dataType:"json",beforeSend:function(){e.showAjaxLoading()},success:function(e){location.reload()},complete:function(){e.hideAjaxLoading()},error:function(e){}}),t.find("> li").removeClass("active"),a.closest("li").addClass("active")}}))}},{key:"showAjaxLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$(".rv-media-main");e.addClass("on-loading").append($("#rv_media_loading").html())}},{key:"hideAjaxLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$(".rv-media-main");e.removeClass("on-loading").find(".loading-wrapper").remove()}},{key:"isOnAjaxLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$(".rv-media-items");return e.hasClass("on-loading")}}])&&e(a.prototype,t),i&&e(a,i),n}();$(document).ready((function(){n.setupSecurity(),(new n).init()}))})();
